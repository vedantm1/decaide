/* 
 * COMPLETELY REBUILT DARK MODE TEXT FIXES
 * Ensuring text is visible while allowing Vanta waves to show through
 */

/* Global text color fixes in dark mode */
html.dark, 
html[data-theme="dark"] {
  /* We only need text colors now - no backgrounds! */
  --dark-text-primary: hsl(210 40% 98%);       /* Primary text */
  --dark-text-secondary: hsl(215 20.2% 65.1%); /* Secondary text */
  --dark-text-muted: hsl(215 20.2% 50%);       /* Muted text */
  
  /* Border colors for subtle visibility */
  --dark-border: rgba(255, 255, 255, 0.1);     /* Subtle border for cards */
  
  /* Reset all backgrounds to transparent by default */
  --dark-bg-primary: transparent;
  --dark-bg-secondary: transparent;
  --dark-bg-tertiary: transparent;
  --dark-bg-highlight: transparent;
  --dark-bg-accent: transparent;
  
  /* Reset surface colors to transparent */
  --surface-0: transparent;
  --surface-1: transparent;
  --surface-2: transparent;
  --surface-3: transparent;
  --surface-4: transparent;
}

/* Body text color only - no background set to allow Vanta to show through */
html.dark body,
html[data-theme="dark"] body {
  /* Remove background color to allow Vanta to show through */
  background-color: transparent !important;
  color: var(--dark-text-primary) !important;
}

/* Main container - transparent background to allow Vanta to show through */
html.dark main,
html[data-theme="dark"] main {
  background-color: transparent !important;
}

/* Cards in dark mode - translucent to allow Vanta waves to show through */
html.dark .card,
html.dark [class*="card"],
html[data-theme="dark"] .card,
html[data-theme="dark"] [class*="card"] {
  background-color: rgba(var(--card-rgb), var(--translucency-card)) !important;
  color: var(--dark-text-primary) !important;
  border-color: var(--dark-border) !important;
  backdrop-filter: blur(4px) !important;
}

/* Headings and descriptive text */
html.dark h1, html.dark h2, html.dark h3, html.dark h4, html.dark h5, html.dark h6,
html[data-theme="dark"] h1, html[data-theme="dark"] h2, html[data-theme="dark"] h3, 
html[data-theme="dark"] h4, html[data-theme="dark"] h5, html[data-theme="dark"] h6,
html.dark [class*="heading"], html[data-theme="dark"] [class*="heading"],
html.dark [class*="title"], html[data-theme="dark"] [class*="title"],
html.dark [class*="header"], html[data-theme="dark"] [class*="header"] {
  color: var(--dark-text-primary) !important;
}

/* Fix for text-slate-800 and similar dark text */
html.dark .text-slate-800, html.dark .text-slate-900, html.dark .text-slate-700,
html.dark .text-black, html.dark .text-gray-800, html.dark .text-gray-900, 
html[data-theme="dark"] .text-slate-800, html[data-theme="dark"] .text-slate-900, 
html[data-theme="dark"] .text-slate-700, html[data-theme="dark"] .text-black,
html[data-theme="dark"] .text-gray-800, html[data-theme="dark"] .text-gray-900 {
  color: var(--dark-text-primary) !important;
}

/* Fix for text-slate-500 and similar mid-tone text */
html.dark .text-slate-500, html.dark .text-slate-600, html.dark .text-gray-500,
html.dark .text-gray-600, html.dark .text-slate-400, html.dark .text-gray-400,
html[data-theme="dark"] .text-slate-500, html[data-theme="dark"] .text-slate-600,
html[data-theme="dark"] .text-gray-500, html[data-theme="dark"] .text-gray-600,
html[data-theme="dark"] .text-slate-400, html[data-theme="dark"] .text-gray-400 {
  color: var(--dark-text-secondary) !important;
}

/* Force text visibility on any elements with color classes */
html.dark [class*="text-"], html[data-theme="dark"] [class*="text-"] {
  color: var(--dark-text-primary) !important;
}

/* Sidebar fixes - translucent to allow Vanta waves to show through */
html.dark aside, html[data-theme="dark"] aside {
  background-color: rgba(var(--card-rgb), var(--translucency-sidebar)) !important;
  border-color: var(--dark-border) !important;
  backdrop-filter: blur(4px) !important;
}

/* Input elements */
html.dark input, html.dark select, html.dark textarea,
html[data-theme="dark"] input, html[data-theme="dark"] select, html[data-theme="dark"] textarea {
  background-color: var(--dark-bg-tertiary) !important;
  border-color: var(--dark-border) !important;
  color: var(--dark-text-primary) !important;
}

/* Table cells and rows */
html.dark table, html.dark tr, html.dark td, html.dark th,
html[data-theme="dark"] table, html[data-theme="dark"] tr, html[data-theme="dark"] td, html[data-theme="dark"] th {
  border-color: var(--dark-border) !important;
  color: var(--dark-text-primary) !important;
}

/* White card backgrounds - specifically fixes the cards in Why DecA(I)de - translucent for Vanta */
html.dark .bg-white, html[data-theme="dark"] .bg-white {
  background-color: rgba(var(--card-rgb), var(--translucency-card)) !important;
  color: var(--dark-text-primary) !important;
  backdrop-filter: blur(4px) !important;
}

/* Fix slate backgrounds, but preserve light theme box */
html.dark .bg-slate-50:not([data-theme-option="light"]), 
html.dark .bg-slate-100:not([data-theme-option="light"]), 
html.dark .bg-slate-200:not([data-theme-option="light"]),
html[data-theme="dark"] .bg-slate-50:not([data-theme-option="light"]), 
html[data-theme="dark"] .bg-slate-100:not([data-theme-option="light"]), 
html[data-theme="dark"] .bg-slate-200:not([data-theme-option="light"]) {
  background-color: transparent !important;
}

/* Light theme box in dark mode */
html.dark [data-theme-option="light"],
html[data-theme="dark"] [data-theme-option="light"] {
  background-color: #ffffff !important;
  color: #000000 !important;
}

/* Settings page fixes - translucent for Vanta */
html.dark .bg-white, 
html.dark [class*="bg-white"],
html.dark div[class*="from-white"], 
html[data-theme="dark"] .bg-white,
html[data-theme="dark"] [class*="bg-white"],
html[data-theme="dark"] div[class*="from-white"] {
  background-color: rgba(var(--card-rgb), var(--translucency-card)) !important;
  background-image: none !important;
  color: var(--dark-text-primary) !important;
  backdrop-filter: blur(4px) !important;
}

/* All color scheme boxes in settings to use dark mode proper styling */
html.dark div[class*="bg-gradient-to-b"],
html[data-theme="dark"] div[class*="bg-gradient-to-b"] {
  background-image: none !important;
  background-color: var(--surface-1) !important;
}

/* Fix slate border colors */
html.dark .border-slate-200, html.dark .border-slate-300,
html[data-theme="dark"] .border-slate-200, html[data-theme="dark"] .border-slate-300 {
  border-color: var(--dark-border) !important;
}

/* Fix buttons in dark mode */
html.dark button, html[data-theme="dark"] button {
  color: inherit !important;
}

/* Fix form labels in dark mode */
html.dark label, html[data-theme="dark"] label {
  color: var(--dark-text-primary) !important;
}

/* Fix descriptions in dark mode */
html.dark [class*="description"], html[data-theme="dark"] [class*="description"] {
  color: var(--dark-text-secondary) !important;
}

/* Tables in Subscription view */
html.dark .bg-white th, html[data-theme="dark"] .bg-white th {
  color: var(--dark-text-primary) !important;
}

/* Core theme styling for headers and paragraphs */
html.dark p, html[data-theme="dark"] p {
  color: var(--dark-text-primary) !important;
}

/* Accent colors from current theme */
html.dark .accent-color, html[data-theme="dark"] .accent-color {
  color: hsl(var(--primary)) !important;
}

/* Icons and UI elements in dark mode */
html.dark svg, html[data-theme="dark"] svg {
  color: inherit;
}

/* Chart backgrounds */
html.dark [class*="chart"], html[data-theme="dark"] [class*="chart"] {
  background-color: var(--dark-bg-secondary) !important;
}

/* Surface styles for different UI elevation - apply these classes to elements */
html.dark .surface-0, html[data-theme="dark"] .surface-0 {
  background-color: var(--surface-0) !important;
}

html.dark .surface-1, html[data-theme="dark"] .surface-1 {
  background-color: var(--surface-1) !important;
}

html.dark .surface-2, html[data-theme="dark"] .surface-2 {
  background-color: var(--surface-2) !important;
}

html.dark .surface-3, html[data-theme="dark"] .surface-3 {
  background-color: var(--surface-3) !important;
}

html.dark .surface-4, html[data-theme="dark"] .surface-4 {
  background-color: var(--surface-4) !important;
}

/* Panel backgrounds for Written Events page */
html.dark .panel-bg, html[data-theme="dark"] .panel-bg {
  background-color: var(--dark-bg-secondary) !important;
}

/* Dropdown menus in dark mode */
html.dark [role="menu"], 
html.dark [role="listbox"],
html[data-theme="dark"] [role="menu"],
html[data-theme="dark"] [role="listbox"] {
  background-color: var(--dark-bg-tertiary) !important;
  border-color: var(--dark-border) !important;
}

/* Dropdown menu items */
html.dark [role="menuitem"],
html.dark [role="option"],
html[data-theme="dark"] [role="menuitem"],
html[data-theme="dark"] [role="option"] {
  color: var(--dark-text-primary) !important;
}

/* Dropdown hover states */
html.dark [role="menuitem"]:hover,
html.dark [role="option"]:hover,
html[data-theme="dark"] [role="menuitem"]:hover,
html[data-theme="dark"] [role="option"]:hover {
  background-color: var(--dark-bg-highlight) !important;
}

/* Dashboard cards - translucent to allow Vanta waves to show through */
html.dark .dashboard-card,
html[data-theme="dark"] .dashboard-card {
  background-color: rgba(var(--card-rgb), var(--translucency-card)) !important;
  border-color: var(--dark-border) !important;
  backdrop-filter: blur(4px) !important;
}

/* Progress bars and sliders */
html.dark .progress-bar-bg,
html[data-theme="dark"] .progress-bar-bg {
  background-color: var(--dark-border) !important;
}

html.dark .progress-bar-fill,
html[data-theme="dark"] .progress-bar-fill {
  background-color: var(--accent-color, hsl(var(--primary))) !important;
}

/* Enhanced link styling */
html.dark a:not([class]),
html[data-theme="dark"] a:not([class]) {
  color: hsl(var(--primary)) !important;
  text-decoration: underline;
}

/* Table striping in dark mode */
html.dark tr:nth-child(even),
html[data-theme="dark"] tr:nth-child(even) {
  background-color: var(--surface-1) !important;
}

/* Fix pagination styling */
html.dark nav[aria-label="pagination"],
html[data-theme="dark"] nav[aria-label="pagination"] {
  color: var(--dark-text-primary) !important;
}

/* Fix badge text */
html.dark .badge, html.dark [class*="badge"],
html[data-theme="dark"] .badge, html[data-theme="dark"] [class*="badge"] {
  color: inherit !important;
}

/* Dark mode tooltip */
html.dark [role="tooltip"],
html[data-theme="dark"] [role="tooltip"] {
  background-color: var(--surface-4) !important;
  color: var(--dark-text-primary) !important;
}

/* Dialog/modal backgrounds */
html.dark [role="dialog"],
html[data-theme="dark"] [role="dialog"] {
  background-color: var(--surface-2) !important;
  border-color: var(--dark-border) !important;
}