<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>DecA(I)de - DECA Practice Platform</title>
    <style>
      /* Full-screen background container - transparent to show Vanta waves */
      body {
        background-color: transparent;
        position: relative;
        min-height: 100vh;
      }
      
      /* No background gradient to ensure Vanta waves visibility */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: none;
        z-index: -1;
        pointer-events: none;
      }
      
      /* Dark mode styling - transparent to show Vanta waves */
      html.dark body {
        background-color: transparent;
      }
      
      html.dark body::before {
        background: none;
      }
      
      /* Smooth transitions */
      body, body::before {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    </style>
    <!-- Load Three.js and Vanta.js libraries directly -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@0.5.24/dist/vanta.waves.min.js"></script>
  </head>
  <body>
    <!-- We'll use this div as a target for the Vanta effect -->
    <div id="vanta-bg" style="position: fixed; z-index: -1; top: 0; left: 0; width: 100%; height: 100%;"></div>
    <div id="root"></div>
    
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Initialize Vanta effect using light mode by default -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize with light mode by default
        const isDark = document.documentElement.classList.contains('dark');
        const color = isDark ? 0x292929 : 0xa7a2a2;
        
        // Create the VANTA effect with the exact configuration requested
        const vantaEffect = VANTA.WAVES({
          el: "#vanta-bg",
          mouseControls: true,
          touchControls: true,
          gyroControls: false,
          minHeight: 200.00,
          minWidth: 200.00,
          scale: 1.00,
          scaleMobile: 1.00,
          color: color,
          shininess: 0.00,
          waveHeight: 28.00,
          waveSpeed: 1.50,
          zoom: 0.65
        });
        
        // Watch for theme changes and update the VANTA effect
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.attributeName === 'class') {
              const isDarkMode = document.documentElement.classList.contains('dark');
              if (vantaEffect && vantaEffect.options) {
                vantaEffect.setOptions({
                  // Apply exactly the same configuration as requested for dark mode
                  color: isDarkMode ? 0x292929 : 0xa7a2a2
                });
                console.log("Updated VANTA effect for", isDarkMode ? "dark mode" : "light mode");
              }
            }
          });
        });
        
        observer.observe(document.documentElement, { attributes: true });
        
        // Clean up on page unload
        window.addEventListener('beforeunload', function() {
          if (vantaEffect) {
            vantaEffect.destroy();
          }
          observer.disconnect();
        });
      });
    </script>
  </body>
</html>
